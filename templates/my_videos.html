<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" type="image/png" href="{{ url_for('static', filename='images/default_logo.png') }}">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}" >

  <title>My Videos - NotoAI</title>
  </head>

  <body class="dark-theme">
    {% include 'navbar_private.html' %}

    <main class="videos-container">
      <div class="page-header">
        <h1 class="leading-none tracking-tighter text-center">My Video Notes</h1>
        <p class="subtitle text-lg leading-relaxed text-center">All your processed videos and summaries in one place</p>
      </div>

      <div class="video-grid">
        {% if videos %}
          {% for video in videos %}
            <div class="video-card">
              <div class="video-card-header">
                <a href="https://www.youtube.com/watch?v={{ video.video_id }}" target="_blank" class="video-thumb-link">
                  <img src="https://img.youtube.com/vi/{{ video.video_id }}/mqdefault.jpg" alt="{{ video.title }}" class="video-thumbnail">
                </a>
              </div>
              <div class="video-card-body">
                <h3 class="video-title text-lg font-semibold leading-snug">{{ video.title }}</h3>
                <div class="video-meta">
                  <span class="video-duration text-sm font-medium">{{ video.duration_minutes }} minutes</span>
                  <span class="video-date text-sm">{{ video.processed_at.strftime('%b %d, %Y') if video.processed_at else 'Unknown date' }}</span>
                </div>
                <button class="view-summary-btn font-medium" data-video-id="{{ video.video_id }}">View Notes</button>
              </div>
            </div>
          {% endfor %}
        {% else %}
          <div class="empty-state">
            <p class="text-base">You haven't processed any videos yet.</p>
            <a href="{{ url_for('dashboard') }}" class="btn-primary">Go to Dashboard</a>
          </div>
        {% endif %}
      </div>
    </main>

    <!-- Summary Modal -->
    <div id="summary-modal" class="modal">
      <div class="modal-content">
        <span class="close-modal">&times;</span>
        <div id="summary-content">
          <h2 id="summary-title" class="text-3xl font-bold tracking-tight">Video Title</h2>
          <div class="modal-actions">
            <button id="download-notes-btn" class="btn-primary font-semibold">Download Notes</button>
          </div>
          <div id="summary-body" class="markdown-content"></div>
        </div>
      </div>
    </div>

    <div id="toast" class="toast"></div>

    {% include 'footer.html' %}

    <script src="{{ url_for('static', filename='login-auth.js') }}" type="module"></script>
    <script src="{{ url_for('static', filename='scripts.js') }}" type="module"></script>
    <script src="{{ url_for('static', filename='my_videos.js') }}" type="module"></script>
  </body>
</html>
